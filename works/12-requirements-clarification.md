# requirements.md の明確化

## 背景

`ccmm init` コマンドの実装時に、私は以下の勘違いをしました：

- **誤解**: 各プロジェクトディレクトリで CLAUDE.md を初期化するコマンド
- **正解**: グローバルに ~/.ccmm/ ディレクトリ構造を初期化する一度だけのコマンド

この勘違いの原因は、requirements.md に init コマンドの具体的な説明がなく、一般的な CLI ツールのパターン（例: `git init`, `npm init`）から類推してしまったためです。

## 改善内容

requirements.md に以下の明確化を追加しました：

### 1. CLI コマンド実装例のセクション

`init` コマンドの説明を追加：
- 目的: ccmm自体の初回セットアップ（プロジェクトごとではない）
- 実行タイミング: 各ユーザーが ccmm を使い始める時に1回だけ
- プロジェクトディレクトリとは無関係

### 2. sync コマンドの前提条件

- 前提: ccmm init 実行済み、現在のディレクトリがGitリポジトリ
- 目的: 現在のプロジェクトのCLAUDE.mdにプリセットを適用

### 3. $HOME 側のレイアウト

- `$HOME/.ccmm/` ← ccmm init で作成される
- `config.json` ← グローバル設定（デフォルトリポジトリ等）

### 4. 動作テスト例

初回のグローバル初期化とプロジェクトごとの操作を明確に分離：
```bash
# 初回のみ（グローバル初期化）
$ ccmm init                  # ~/.ccmm/ を作成、デフォルトリポジトリ設定

# clone 済みリポで（プロジェクトごと）
$ cd my-project              # Gitリポジトリに移動
$ ccmm sync                  # CLAUDE.md に import 行追加
```

## 教訓

CLI ツールの設計では、グローバル設定とプロジェクト固有の操作を明確に区別することが重要です。特に `init` というコマンド名は多くのツールで異なる意味を持つため、その役割を明確に文書化する必要があります。